---
title: "The case_when() Function"
description: |
  A gem within the expansive tidyverse 
author:
  - name: Unknown
date: 08-10-2021
output:
  distill::distill_article:
    self_contained: false
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(here)
library(tidyverse)
library(janitor)
```

## First thing first, import your data! Lobster data, of course.

```{r, include = TRUE}
lobsters <- read_csv(here::here("_posts", "2021-08-10-hello", "data","Lobster_Abundance_All_Years_20210412.csv"), na = c("-99999", "")) %>% 
  clean_names() %>% 
  uncount(count)
```



## case_when()
### Use this function to bin continuous data, categorize it, and add it to your data set
### case_when() is used here to categorize lobsters into size bins that help us determine if each individual lobster is legally too small to catch, or if it is large enough to legally harvest from different locations along the Santa Barbara coast.

```{r, include = TRUE}

lobsters_legality <- lobsters %>% 
  mutate(legal = case_when(
    size_mm >= 79.76 ~ "yes",
    size_mm < 79.76 ~ "no")) %>% 
   group_by(site, legal) %>% 
  summarize(site_legal_count = n())

proportion_legal_plot <- ggplot(lobsters_legality, aes(x = site, y = site_legal_count)) +
  geom_col(position = "fill",
               aes(color = legal,
               fill = legal))

proportion_legal_plot
```


Distill is a publication format for scientific and technical writing, native to the web.

Learn more about using Distill at <https://rstudio.github.io/distill>.


